function cov_1u803uotzs(){var path="/home/seele/projetos/robson/nodejs/curso_erickwendel/10-multi-db-refactory-mongodb/src/db/mongodb/mongodb.js";var hash="b337fcf0ce32ffc55121e87aaa3d6fc651733801";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/seele/projetos/robson/nodejs/curso_erickwendel/10-multi-db-refactory-mongodb/src/db/mongodb/mongodb.js",statementMap:{"0":{start:{line:1,column:14},end:{line:1,column:53}},"1":{start:{line:2,column:17},end:{line:2,column:36}},"2":{start:{line:3,column:15},end:{line:8,column:1}},"3":{start:{line:11,column:8},end:{line:11,column:16}},"4":{start:{line:12,column:8},end:{line:12,column:27}},"5":{start:{line:13,column:8},end:{line:13,column:27}},"6":{start:{line:14,column:8},end:{line:14,column:30}},"7":{start:{line:15,column:8},end:{line:15,column:27}},"8":{start:{line:16,column:8},end:{line:16,column:23}},"9":{start:{line:20,column:22},end:{line:20,column:56}},"10":{start:{line:21,column:8},end:{line:21,column:47}},"11":{start:{line:21,column:34},end:{line:21,column:47}},"12":{start:{line:22,column:8},end:{line:22,column:48}},"13":{start:{line:22,column:35},end:{line:22,column:48}},"14":{start:{line:24,column:8},end:{line:24,column:64}},"15":{start:{line:24,column:37},end:{line:24,column:62}},"16":{start:{line:25,column:8},end:{line:25,column:50}},"17":{start:{line:29,column:28},end:{line:38,column:10}},"18":{start:{line:40,column:8},end:{line:40,column:61}},"19":{start:{line:44,column:8},end:{line:49,column:11}},"20":{start:{line:47,column:12},end:{line:47,column:28}},"21":{start:{line:47,column:21},end:{line:47,column:28}},"22":{start:{line:48,column:12},end:{line:48,column:50}},"23":{start:{line:51,column:8},end:{line:51,column:46}},"24":{start:{line:52,column:8},end:{line:52,column:88}},"25":{start:{line:52,column:43},end:{line:52,column:86}},"26":{start:{line:56,column:8},end:{line:56,column:41}},"27":{start:{line:60,column:8},end:{line:60,column:63}},"28":{start:{line:64,column:8},end:{line:64,column:62}},"29":{start:{line:68,column:8},end:{line:68,column:50}},"30":{start:{line:72,column:0},end:{line:72,column:25}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:10,column:4},end:{line:10,column:5}},loc:{start:{line:10,column:18},end:{line:17,column:5}},line:10},"1":{name:"(anonymous_1)",decl:{start:{line:19,column:4},end:{line:19,column:5}},loc:{start:{line:19,column:23},end:{line:26,column:5}},line:19},"2":{name:"(anonymous_2)",decl:{start:{line:24,column:26},end:{line:24,column:27}},loc:{start:{line:24,column:37},end:{line:24,column:62}},line:24},"3":{name:"(anonymous_3)",decl:{start:{line:28,column:4},end:{line:28,column:5}},loc:{start:{line:28,column:18},end:{line:41,column:5}},line:28},"4":{name:"(anonymous_4)",decl:{start:{line:43,column:4},end:{line:43,column:5}},loc:{start:{line:43,column:14},end:{line:53,column:5}},line:43},"5":{name:"(anonymous_5)",decl:{start:{line:46,column:8},end:{line:46,column:9}},loc:{start:{line:46,column:23},end:{line:49,column:9}},line:46},"6":{name:"(anonymous_6)",decl:{start:{line:52,column:37},end:{line:52,column:38}},loc:{start:{line:52,column:43},end:{line:52,column:86}},line:52},"7":{name:"(anonymous_7)",decl:{start:{line:55,column:4},end:{line:55,column:5}},loc:{start:{line:55,column:23},end:{line:57,column:5}},line:55},"8":{name:"(anonymous_8)",decl:{start:{line:59,column:4},end:{line:59,column:5}},loc:{start:{line:59,column:39},end:{line:61,column:5}},line:59},"9":{name:"(anonymous_9)",decl:{start:{line:63,column:4},end:{line:63,column:5}},loc:{start:{line:63,column:21},end:{line:65,column:5}},line:63},"10":{name:"(anonymous_10)",decl:{start:{line:67,column:4},end:{line:67,column:5}},loc:{start:{line:67,column:15},end:{line:69,column:5}},line:67}},branchMap:{"0":{loc:{start:{line:21,column:8},end:{line:21,column:47}},type:"if",locations:[{start:{line:21,column:8},end:{line:21,column:47}},{start:{line:21,column:8},end:{line:21,column:47}}],line:21},"1":{loc:{start:{line:22,column:8},end:{line:22,column:48}},type:"if",locations:[{start:{line:22,column:8},end:{line:22,column:48}},{start:{line:22,column:8},end:{line:22,column:48}}],line:22},"2":{loc:{start:{line:47,column:12},end:{line:47,column:28}},type:"if",locations:[{start:{line:47,column:12},end:{line:47,column:28}},{start:{line:47,column:12},end:{line:47,column:28}}],line:47},"3":{loc:{start:{line:59,column:21},end:{line:59,column:27}},type:"default-arg",locations:[{start:{line:59,column:26},end:{line:59,column:27}}],line:59},"4":{loc:{start:{line:59,column:29},end:{line:59,column:37}},type:"default-arg",locations:[{start:{line:59,column:35},end:{line:59,column:37}}],line:59}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0],"4":[0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b337fcf0ce32ffc55121e87aaa3d6fc651733801"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1u803uotzs=function(){return actualCoverage;};}return actualCoverage;}cov_1u803uotzs();const ICrud=(cov_1u803uotzs().s[0]++,require('../interfaces/interface.crud'));const Mongoose=(cov_1u803uotzs().s[1]++,require('mongoose'));const STATUS=(cov_1u803uotzs().s[2]++,{0:'Disconectado',1:'Conectado',2:'Conectando',3:'Disconectando'});class MongoDB extends ICrud{constructor(){cov_1u803uotzs().f[0]++;cov_1u803uotzs().s[3]++;super();cov_1u803uotzs().s[4]++;this._driver=null;cov_1u803uotzs().s[5]++;this._herois=null;cov_1u803uotzs().s[6]++;this.connection=null;cov_1u803uotzs().s[7]++;this.defineModel();cov_1u803uotzs().s[8]++;this.connect();}async isConnected(){cov_1u803uotzs().f[1]++;const state=(cov_1u803uotzs().s[9]++,STATUS[this.connection.readyState]);cov_1u803uotzs().s[10]++;if(state==='Conectado'){cov_1u803uotzs().b[0][0]++;cov_1u803uotzs().s[11]++;return state;}else{cov_1u803uotzs().b[0][1]++;}cov_1u803uotzs().s[12]++;if(state!=='Conectando'){cov_1u803uotzs().b[1][0]++;cov_1u803uotzs().s[13]++;return state;}else{cov_1u803uotzs().b[1][1]++;}cov_1u803uotzs().s[14]++;await new Promise(resolve=>{cov_1u803uotzs().f[2]++;cov_1u803uotzs().s[15]++;return setTimeout(resolve,1000);});cov_1u803uotzs().s[16]++;return STATUS[this.connection.readyState];}defineModel(){cov_1u803uotzs().f[3]++;const heroiSchema=(cov_1u803uotzs().s[17]++,new Mongoose.Schema({nome:{type:String,required:true},poder:{type:String,required:true}}));cov_1u803uotzs().s[18]++;this._herois=Mongoose.model('herois',heroiSchema);}connect(){cov_1u803uotzs().f[4]++;cov_1u803uotzs().s[19]++;Mongoose.connect('mongodb://robson:root@localhost:27017/herois?authSource=admin&readPreference=primary&ssl=false',{useUnifiedTopology:true,useNewUrlParser:true},function(err){cov_1u803uotzs().f[5]++;cov_1u803uotzs().s[20]++;if(!err){cov_1u803uotzs().b[2][0]++;cov_1u803uotzs().s[21]++;return;}else{cov_1u803uotzs().b[2][1]++;}cov_1u803uotzs().s[22]++;console.log('Falha na conexÃ£o!',err);});cov_1u803uotzs().s[23]++;this.connection=Mongoose.connection;cov_1u803uotzs().s[24]++;this.connection.once('Open',()=>{cov_1u803uotzs().f[6]++;cov_1u803uotzs().s[25]++;return console.log('Conectado ao banco de dados!');});}async create(item){cov_1u803uotzs().f[7]++;cov_1u803uotzs().s[26]++;return this._herois.create(item);}async read(item,skip=(cov_1u803uotzs().b[3][0]++,0),limit=(cov_1u803uotzs().b[4][0]++,10)){cov_1u803uotzs().f[8]++;cov_1u803uotzs().s[27]++;return this._herois.find(item).skip(skip).limit(limit);}update(id,item){cov_1u803uotzs().f[9]++;cov_1u803uotzs().s[28]++;return this._herois.updateOne({_id:id},{$set:item});}delete(id){cov_1u803uotzs().f[10]++;cov_1u803uotzs().s[29]++;return this._herois.deleteOne({_id:id});}}cov_1u803uotzs().s[30]++;module.exports=MongoDB;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vbmdvZGIuanMiXSwibmFtZXMiOlsiSUNydWQiLCJyZXF1aXJlIiwiTW9uZ29vc2UiLCJTVEFUVVMiLCJNb25nb0RCIiwiY29uc3RydWN0b3IiLCJfZHJpdmVyIiwiX2hlcm9pcyIsImNvbm5lY3Rpb24iLCJkZWZpbmVNb2RlbCIsImNvbm5lY3QiLCJpc0Nvbm5lY3RlZCIsInN0YXRlIiwicmVhZHlTdGF0ZSIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsImhlcm9pU2NoZW1hIiwiU2NoZW1hIiwibm9tZSIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsInBvZGVyIiwibW9kZWwiLCJ1c2VVbmlmaWVkVG9wb2xvZ3kiLCJ1c2VOZXdVcmxQYXJzZXIiLCJlcnIiLCJjb25zb2xlIiwibG9nIiwib25jZSIsImNyZWF0ZSIsIml0ZW0iLCJyZWFkIiwic2tpcCIsImxpbWl0IiwiZmluZCIsInVwZGF0ZSIsImlkIiwidXBkYXRlT25lIiwiX2lkIiwiJHNldCIsImRlbGV0ZSIsImRlbGV0ZU9uZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJnb0tBZVk7MkZBZlosS0FBTUEsQ0FBQUEsS0FBSywwQkFBR0MsT0FBTyxDQUFDLDhCQUFELENBQVYsQ0FBWCxDQUNBLEtBQU1DLENBQUFBLFFBQVEsMEJBQUdELE9BQU8sQ0FBQyxVQUFELENBQVYsQ0FBZCxDQUNBLEtBQU1FLENBQUFBLE1BQU0sMEJBQUcsQ0FDWCxFQUFHLGNBRFEsQ0FFWCxFQUFHLFdBRlEsQ0FHWCxFQUFHLFlBSFEsQ0FJWCxFQUFHLGVBSlEsQ0FBSCxDQUFaLENBTUEsS0FBTUMsQ0FBQUEsT0FBTixRQUFzQkosQ0FBQUEsS0FBTSxDQUN4QkssV0FBVyxFQUFHLGlEQUNWLFFBRFUsd0JBRVYsS0FBS0MsT0FBTCxDQUFlLElBQWYsQ0FGVSx3QkFHVixLQUFLQyxPQUFMLENBQWUsSUFBZixDQUhVLHdCQUlWLEtBQUtDLFVBQUwsQ0FBa0IsSUFBbEIsQ0FKVSx3QkFLVixL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ZSgnLi4vaW50ZXJmYWNlcy9pbnRlcmZhY2UuY3J1ZCcpO1xuY29uc3QgTW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpO1xuY29uc3QgU1RBVFVTID0ge1xuICAgIDA6ICdEaXNjb25lY3RhZG8nLFxuICAgIDE6ICdDb25lY3RhZG8nLFxuICAgIDI6ICdDb25lY3RhbmRvJyxcbiAgICAzOiAnRGlzY29uZWN0YW5kbydcbn1cbmNsYXNzIE1vbmdvREIgZXh0ZW5kcyBJQ3J1ZCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuX2RyaXZlciA9IG51bGxcbiAgICAgICAgdGhpcy5faGVyb2lzID0gbnVsbFxuICAgICAgICB0aGlzLmNvbm5lY3Rpb24gPSBudWxsXG4gICAgICAgIHRoaXMuZGVmaW5lTW9kZWwoKTtcbiAgICAgICAgdGhpcy5jb25uZWN0KCk7XG4gICAgfVxuXG4gICAgYXN5bmMgaXNDb25uZWN0ZWQoKXsgXG4gICAgICAgIGNvbnN0IHN0YXRlID0gU1RBVFVTW3RoaXMuY29ubmVjdGlvbi5yZWFkeVN0YXRlXTtcbiAgICAgICAgaWYoc3RhdGUgPT09ICdDb25lY3RhZG8nKSByZXR1cm4gc3RhdGU7XG4gICAgICAgIGlmKHN0YXRlICE9PSAnQ29uZWN0YW5kbycpIHJldHVybiBzdGF0ZTtcblxuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwMCkpO1xuICAgICAgICByZXR1cm4gU1RBVFVTW3RoaXMuY29ubmVjdGlvbi5yZWFkeVN0YXRlXTtcbiAgICB9XG5cbiAgICBkZWZpbmVNb2RlbCgpIHtcbiAgICAgICAgY29uc3QgaGVyb2lTY2hlbWEgPSBuZXcgTW9uZ29vc2UuU2NoZW1hKHtcbiAgICAgICAgICAgIG5vbWU6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwb2Rlcjoge1xuICAgICAgICAgICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgdGhpcy5faGVyb2lzID0gTW9uZ29vc2UubW9kZWwoJ2hlcm9pcycsIGhlcm9pU2NoZW1hKTtcbiAgICB9XG5cbiAgICBjb25uZWN0KCkge1xuICAgICAgICBNb25nb29zZS5jb25uZWN0KCdtb25nb2RiOi8vcm9ic29uOnJvb3RAbG9jYWxob3N0OjI3MDE3L2hlcm9pcz9hdXRoU291cmNlPWFkbWluJnJlYWRQcmVmZXJlbmNlPXByaW1hcnkmc3NsPWZhbHNlJywgXG4gICAgICAgIHsgdXNlVW5pZmllZFRvcG9sb2d5OiB0cnVlLCB1c2VOZXdVcmxQYXJzZXI6IHRydWV9LFxuICAgICAgICBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICBpZighZXJyKSByZXR1cm47XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnRmFsaGEgbmEgY29uZXjDo28hJywgZXJyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLmNvbm5lY3Rpb24gPSBNb25nb29zZS5jb25uZWN0aW9uO1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb24ub25jZSgnT3BlbicsICgpID0+IGNvbnNvbGUubG9nKCdDb25lY3RhZG8gYW8gYmFuY28gZGUgZGFkb3MhJykpO1xuICAgIH1cblxuICAgIGFzeW5jIGNyZWF0ZShpdGVtKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9oZXJvaXMuY3JlYXRlKGl0ZW0pO1xuICAgIH1cblxuICAgIGFzeW5jIHJlYWQoaXRlbSwgc2tpcD0wLCBsaW1pdD0xMCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faGVyb2lzLmZpbmQoaXRlbSkuc2tpcChza2lwKS5saW1pdChsaW1pdCk7XG4gICAgfVxuXG4gICAgdXBkYXRlKGlkLCBpdGVtKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9oZXJvaXMudXBkYXRlT25lKHtfaWQ6IGlkfSwgeyRzZXQ6IGl0ZW19KVxuICAgIH1cblxuICAgIGRlbGV0ZShpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faGVyb2lzLmRlbGV0ZU9uZSh7IF9pZDogaWQgfSlcbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gTW9uZ29EQjsiXX0=