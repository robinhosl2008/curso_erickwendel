function cov_1u803uotzs(){var path="/home/seele/projetos/robson/nodejs/curso_erickwendel/10-multi-db-refactory-mongodb/src/db/mongodb/mongodb.js";var hash="89df8cc415e1fedad59a16f29edfa1c5cff501a8";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/seele/projetos/robson/nodejs/curso_erickwendel/10-multi-db-refactory-mongodb/src/db/mongodb/mongodb.js",statementMap:{"0":{start:{line:1,column:14},end:{line:1,column:53}},"1":{start:{line:2,column:17},end:{line:2,column:36}},"2":{start:{line:4,column:15},end:{line:9,column:1}},"3":{start:{line:13,column:8},end:{line:13,column:16}},"4":{start:{line:14,column:8},end:{line:14,column:30}},"5":{start:{line:15,column:8},end:{line:15,column:37}},"6":{start:{line:19,column:22},end:{line:19,column:56}},"7":{start:{line:20,column:8},end:{line:20,column:47}},"8":{start:{line:20,column:34},end:{line:20,column:47}},"9":{start:{line:21,column:8},end:{line:21,column:48}},"10":{start:{line:21,column:35},end:{line:21,column:48}},"11":{start:{line:23,column:8},end:{line:23,column:64}},"12":{start:{line:23,column:37},end:{line:23,column:62}},"13":{start:{line:24,column:8},end:{line:24,column:50}},"14":{start:{line:28,column:8},end:{line:28,column:41}},"15":{start:{line:32,column:8},end:{line:32,column:63}},"16":{start:{line:36,column:8},end:{line:36,column:62}},"17":{start:{line:40,column:8},end:{line:40,column:50}},"18":{start:{line:44,column:0},end:{line:44,column:25}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:12,column:4},end:{line:12,column:5}},loc:{start:{line:12,column:36},end:{line:16,column:5}},line:12},"1":{name:"(anonymous_1)",decl:{start:{line:18,column:4},end:{line:18,column:5}},loc:{start:{line:18,column:23},end:{line:25,column:5}},line:18},"2":{name:"(anonymous_2)",decl:{start:{line:23,column:26},end:{line:23,column:27}},loc:{start:{line:23,column:37},end:{line:23,column:62}},line:23},"3":{name:"(anonymous_3)",decl:{start:{line:27,column:4},end:{line:27,column:5}},loc:{start:{line:27,column:23},end:{line:29,column:5}},line:27},"4":{name:"(anonymous_4)",decl:{start:{line:31,column:4},end:{line:31,column:5}},loc:{start:{line:31,column:39},end:{line:33,column:5}},line:31},"5":{name:"(anonymous_5)",decl:{start:{line:35,column:4},end:{line:35,column:5}},loc:{start:{line:35,column:21},end:{line:37,column:5}},line:35},"6":{name:"(anonymous_6)",decl:{start:{line:39,column:4},end:{line:39,column:5}},loc:{start:{line:39,column:15},end:{line:41,column:5}},line:39}},branchMap:{"0":{loc:{start:{line:20,column:8},end:{line:20,column:47}},type:"if",locations:[{start:{line:20,column:8},end:{line:20,column:47}},{start:{line:20,column:8},end:{line:20,column:47}}],line:20},"1":{loc:{start:{line:21,column:8},end:{line:21,column:48}},type:"if",locations:[{start:{line:21,column:8},end:{line:21,column:48}},{start:{line:21,column:8},end:{line:21,column:48}}],line:21},"2":{loc:{start:{line:31,column:21},end:{line:31,column:27}},type:"default-arg",locations:[{start:{line:31,column:26},end:{line:31,column:27}}],line:31},"3":{loc:{start:{line:31,column:29},end:{line:31,column:37}},type:"default-arg",locations:[{start:{line:31,column:35},end:{line:31,column:37}}],line:31}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},b:{"0":[0,0],"1":[0,0],"2":[0],"3":[0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"89df8cc415e1fedad59a16f29edfa1c5cff501a8"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1u803uotzs=function(){return actualCoverage;};}return actualCoverage;}cov_1u803uotzs();const ICrud=(cov_1u803uotzs().s[0]++,require('../interfaces/interface.crud'));const Mongoose=(cov_1u803uotzs().s[1]++,require('mongoose'));const STATUS=(cov_1u803uotzs().s[2]++,{0:'Disconectado',1:'Conectado',2:'Conectando',3:'Disconectando'});class MongoDB extends ICrud{constructor(connection,schema){cov_1u803uotzs().f[0]++;cov_1u803uotzs().s[3]++;super();cov_1u803uotzs().s[4]++;this._schema=schema;cov_1u803uotzs().s[5]++;this.connection=connection;}async isConnected(){cov_1u803uotzs().f[1]++;const state=(cov_1u803uotzs().s[6]++,STATUS[this.connection.readyState]);cov_1u803uotzs().s[7]++;if(state==='Conectado'){cov_1u803uotzs().b[0][0]++;cov_1u803uotzs().s[8]++;return state;}else{cov_1u803uotzs().b[0][1]++;}cov_1u803uotzs().s[9]++;if(state!=='Conectando'){cov_1u803uotzs().b[1][0]++;cov_1u803uotzs().s[10]++;return state;}else{cov_1u803uotzs().b[1][1]++;}cov_1u803uotzs().s[11]++;await new Promise(resolve=>{cov_1u803uotzs().f[2]++;cov_1u803uotzs().s[12]++;return setTimeout(resolve,1000);});cov_1u803uotzs().s[13]++;return STATUS[this.connection.readyState];}async create(item){cov_1u803uotzs().f[3]++;cov_1u803uotzs().s[14]++;return this._schema.create(item);}async read(item,skip=(cov_1u803uotzs().b[2][0]++,0),limit=(cov_1u803uotzs().b[3][0]++,10)){cov_1u803uotzs().f[4]++;cov_1u803uotzs().s[15]++;return this._schema.find(item).skip(skip).limit(limit);}update(id,item){cov_1u803uotzs().f[5]++;cov_1u803uotzs().s[16]++;return this._schema.updateOne({_id:id},{$set:item});}delete(id){cov_1u803uotzs().f[6]++;cov_1u803uotzs().s[17]++;return this._schema.deleteOne({_id:id});}}cov_1u803uotzs().s[18]++;module.exports=MongoDB;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vbmdvZGIuanMiXSwibmFtZXMiOlsiSUNydWQiLCJyZXF1aXJlIiwiTW9uZ29vc2UiLCJTVEFUVVMiLCJNb25nb0RCIiwiY29uc3RydWN0b3IiLCJjb25uZWN0aW9uIiwic2NoZW1hIiwiX3NjaGVtYSIsImlzQ29ubmVjdGVkIiwic3RhdGUiLCJyZWFkeVN0YXRlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiY3JlYXRlIiwiaXRlbSIsInJlYWQiLCJza2lwIiwibGltaXQiLCJmaW5kIiwidXBkYXRlIiwiaWQiLCJ1cGRhdGVPbmUiLCJfaWQiLCIkc2V0IiwiZGVsZXRlIiwiZGVsZXRlT25lIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6InVsSEFlWTsyRkFmWixLQUFNQSxDQUFBQSxLQUFLLDBCQUFHQyxPQUFPLENBQUMsOEJBQUQsQ0FBVixDQUFYLENBQ0EsS0FBTUMsQ0FBQUEsUUFBUSwwQkFBR0QsT0FBTyxDQUFDLFVBQUQsQ0FBVixDQUFkLENBRUEsS0FBTUUsQ0FBQUEsTUFBTSwwQkFBRyxDQUNYLEVBQUcsY0FEUSxDQUVYLEVBQUcsV0FGUSxDQUdYLEVBQUcsWUFIUSxDQUlYLEVBQUcsZUFKUSxDQUFILENBQVosQ0FPQSxLQUFNQyxDQUFBQSxPQUFOLFFBQXNCSixDQUFBQSxLQUFNLENBQ3hCSyxXQUFXLENBQUNDLFVBQUQsQ0FBYUMsTUFBYixDQUFxQixpREFDNUIsUUFENEIsd0JBRTVCLEtBQUtDLE9BQUwsQ0FBZUQsTUFBZixDQUY0Qix3QkFHNUIsS0FBS0QsVUFBTCxDQUFrQkEsVUFBbEIsQ0FDSCxDQUVnQixLQUFYRyxDQUFBQSxXQUFXLEVBQUUseUJBQ2YsS0FBTUMsQ0FBQUEsS0FBSywwQkFBR1AsTUFBTSxDQUFDLEtBQUtHLFVBQUwsQ0FBZ0JLLFVBQWpCLENBQVQsQ0FBWCxDQURlLHdCQUVmLEdBQUdELEtBQUssR0FBSyxXQUFiLENBQTBCLDBEQUFPQSxDQUFBQSxLQUFQLENBQWEsQ0FBdkMsaUNBRmUsd0JBR2YsR0FBR0EsS0FBSyxHQUFLLFlBQWIsQ0FBMkIsMkRBQU9BLENBQUFBLEtBQVAsQ0FBYSxDQUF4QyxpQ0FIZSx5QkFLZixLQUFNLElBQUlFLENBQUFBLE9BQUosQ0FBWUMsT0FBTyxFQUFJLHdEQUFBQyxDQUFBQSxVQUFVLENBQUNELE9BQUQsQ0FBVSxJQUFWLENBQVYsQ0FBeUIsQ0FBaEQsQ0FBTixDQUxlLHlCQU1mLE1BQU9WLENBQUFBLE1BQU0sQ0FBQyxLQUFLRyxVQUFMLENBQWdCSyxVQUFqQixDQUFiLENBQ0gsQ0FFVyxLQUFOSSxDQUFBQSxNQUFNLENBQUNDLElBQUQsQ0FBTyxrREFDZixNQUFPLE1BQUtSLE9BQUwsQ0FBYU8sTUFBYixDQUFvQkMsSUFBcEIsQ0FBUCxDQUNILENBRVMsS0FBSkMsQ0FBQUEsSUFBSSxDQUFDRCxJQUFELENBQU9FLElBQUksNkJBQUMsQ0FBRCxDQUFYLENBQWVDLEtBQUssNkJBQUMsRUFBRCxDQUFwQixDQUF5QixrREFDL0IsTUFBTyxNQUFLWCxPQUFMLENBQWFZLElBQWIsQ0FBa0JKLElBQWxCLEVBQXdCRSxJQUF4QixDQUE2QkEsSUFBN0IsRUFBbUNDLEtBQW5DLENBQXlDQSxLQUF6QyxDQUFQLENBQ0gsQ0FFREUsTUFBTSxDQUFDQyxFQUFELENBQUtOLElBQUwsQ0FBVyxrREFDYixNQUFPLE1BQUtSLE9BQUwsQ0FBYWUsU0FBYixDQUF1QixDQUFDQyxHQUFHLENBQUVGLEVBQU4sQ0FBdkIsQ0FBa0MsQ0FBQ0csSUFBSSxDQUFFVCxJQUFQLENBQWxDLENBQVAsQ0FDSCxDQUVEVSxNQUFNLENBQUNKLEVBQUQsQ0FBSyxrREFDUCxNQUFPLE1BQUtkLE9BQUwsQ0FBYW1CLFNBQWIsQ0FBdUIsQ0FBRUgsR0FBRyxDQUFFRixFQUFQLENBQXZCLENBQVAsQ0FDSCxDQTlCdUIsQyx5QkFpQzVCTSxNQUFNLENBQUNDLE9BQVAsQ0FBaUJ6QixPQUFqQiIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IElDcnVkID0gcmVxdWlyZSgnLi4vaW50ZXJmYWNlcy9pbnRlcmZhY2UuY3J1ZCcpO1xuY29uc3QgTW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpO1xuXG5jb25zdCBTVEFUVVMgPSB7XG4gICAgMDogJ0Rpc2NvbmVjdGFkbycsXG4gICAgMTogJ0NvbmVjdGFkbycsXG4gICAgMjogJ0NvbmVjdGFuZG8nLFxuICAgIDM6ICdEaXNjb25lY3RhbmRvJ1xufVxuXG5jbGFzcyBNb25nb0RCIGV4dGVuZHMgSUNydWQge1xuICAgIGNvbnN0cnVjdG9yKGNvbm5lY3Rpb24sIHNjaGVtYSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLl9zY2hlbWEgPSBzY2hlbWE7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbiA9IGNvbm5lY3Rpb247XG4gICAgfVxuXG4gICAgYXN5bmMgaXNDb25uZWN0ZWQoKXsgXG4gICAgICAgIGNvbnN0IHN0YXRlID0gU1RBVFVTW3RoaXMuY29ubmVjdGlvbi5yZWFkeVN0YXRlXTtcbiAgICAgICAgaWYoc3RhdGUgPT09ICdDb25lY3RhZG8nKSByZXR1cm4gc3RhdGU7XG4gICAgICAgIGlmKHN0YXRlICE9PSAnQ29uZWN0YW5kbycpIHJldHVybiBzdGF0ZTtcblxuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwMCkpO1xuICAgICAgICByZXR1cm4gU1RBVFVTW3RoaXMuY29ubmVjdGlvbi5yZWFkeVN0YXRlXTtcbiAgICB9XG5cbiAgICBhc3luYyBjcmVhdGUoaXRlbSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2NoZW1hLmNyZWF0ZShpdGVtKTtcbiAgICB9XG5cbiAgICBhc3luYyByZWFkKGl0ZW0sIHNraXA9MCwgbGltaXQ9MTApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NjaGVtYS5maW5kKGl0ZW0pLnNraXAoc2tpcCkubGltaXQobGltaXQpO1xuICAgIH1cblxuICAgIHVwZGF0ZShpZCwgaXRlbSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2NoZW1hLnVwZGF0ZU9uZSh7X2lkOiBpZH0sIHskc2V0OiBpdGVtfSlcbiAgICB9XG5cbiAgICBkZWxldGUoaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NjaGVtYS5kZWxldGVPbmUoeyBfaWQ6IGlkIH0pXG4gICAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IE1vbmdvREI7Il19